# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é ¬´–í–≤–µ–¥–µ–Ω–∏–µ –≤ Terraform¬ª - –ë–∞—Ä—ã—à–∫–æ–≤ –ú–∏—Ö–∞–∏–ª

### –ó–∞–¥–∞–Ω–∏–µ 1

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ [**src**](https://github.com/netology-code/ter-homeworks/tree/main/01/src). –°–∫–∞—á–∞–π—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ. 
2. –ò–∑—É—á–∏—Ç–µ —Ñ–∞–π–ª **.gitignore**. –í –∫–∞–∫–æ–º terraform-—Ñ–∞–π–ª–µ, —Å–æ–≥–ª–∞—Å–Ω–æ —ç—Ç–æ–º—É .gitignore, –¥–æ–ø—É—Å—Ç–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–∏—á–Ω—É—é, —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?(–ª–æ–≥–∏–Ω—ã,–ø–∞—Ä–æ–ª–∏,–∫–ª—é—á–∏,—Ç–æ–∫–µ–Ω—ã –∏—Ç–¥)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞. –ù–∞–π–¥–∏—Ç–µ  –≤ state-—Ñ–∞–π–ª–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ **random_password**, –ø—Ä–∏—à–ª–∏—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ.
4. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ –∫–æ–¥–∞, –ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –Ω–∞ —Å—Ç—Ä–æ—á–∫–∞—Ö 29‚Äì42 —Ñ–∞–π–ª–∞ **main.tf**.
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ```terraform validate```. –û–±—ä—è—Å–Ω–∏—Ç–µ, –≤ —á—ë–º –∑–∞–∫–ª—é—á–∞—é—Ç—Å—è –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –¥–æ–ø—É—â–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö.
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥. –í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ –∏ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã ```docker ps```.
6. –ó–∞–º–µ–Ω–∏—Ç–µ –∏–º—è docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –±–ª–æ–∫–µ –∫–æ–¥–∞ –Ω–∞ ```hello_world```. –ù–µ –ø–µ—Ä–µ–ø—É—Ç–∞–π—Ç–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –∏–º—è –æ–±—Ä–∞–∑–∞. –ú—ã –≤—Å—ë –µ—â—ë –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å name = "nginx:latest". –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ```terraform apply -auto-approve```.
–û–±—ä—è—Å–Ω–∏—Ç–µ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –≤ —á—ë–º –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–ª—é—á–∞  ```-auto-approve```. –î–æ–≥–∞–¥–∞–π—Ç–µ—Å—å –∏–ª–∏ –Ω–∞–≥—É–≥–ª–∏—Ç–µ –∑–∞—á–µ–º –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–π –∫–ª—é—á? –í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã ```docker ps```.
8. –£–Ω–∏—á—Ç–æ–∂—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Å –ø–æ–º–æ—â—å—é **terraform**. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã —É–¥–∞–ª–µ–Ω—ã. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ **terraform.tfstate**. 
9. –û–±—ä—è—Å–Ω–∏—Ç–µ, –ø–æ—á–µ–º—É –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –±—ã–ª —É–¥–∞–ª—ë–Ω docker-–æ–±—Ä–∞–∑ **nginx:latest**. –û—Ç–≤–µ—Ç **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ù–ê–ô–î–ò–¢–ï –í –ü–†–ï–î–û–°–¢–ê–í–õ–ï–ù–ù–û–ú –ö–û–î–ï**, –∞ –∑–∞—Ç–µ–º **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ü–û–î–ö–†–ï–ü–ò–¢–ï** —Å—Ç—Ä–æ—á–∫–æ–π –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ [**terraform –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ docker**](https://docs.comcloud.xyz/providers/kreuzwerker/docker/latest/docs).  (–∏—â–∏—Ç–µ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–µ resource docker_image )


------

## –†–µ—à–µ–Ω–∏–µ 1

1. ![img1](img/img1.png)
2. –¥–æ–ø—É—Å—Ç–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–∏—á–Ω—É—é, —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é personal.auto.tfvars
3. ![img2](img/img2.png)
4. ![img3](img/img3.png)
![img3](img/img3.png)

‚ùå –û—à–∏–±–∫–∏: 

-  –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è —Ä–µ—Å—É—Ä—Å–∞ random_password:

```text    
random_password.random_string_FAKE.resulT
```
 
- random_string_FAKE ‚Äî —Ç–∞–∫–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –Ω–µ—Ç.

**–í–µ—Ä–Ω–æ–µ –∏–º—è: random_password.random_string.**
     

-- –û—à–∏–±–∫–∞ –≤ –∏–º–µ–Ω–∏ –∞—Ç—Ä–∏–±—É—Ç–∞:

**.resulT** ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **.result** (—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É).
     

- –ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (1nginx):

–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ü–∏—Ñ—Ä—ã. Terraform –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ, –Ω–æ —ç—Ç–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è , —Ç–∞–∫ –∫–∞–∫ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤—ã–≤–æ–¥–∞—Ö –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö).

- –ó–¥–µ—Å—å –≤—ã —É–∫–∞–∑–∞–ª–∏ —Ç–æ–ª—å–∫–æ —Ç–∏–ø (docker_image), –Ω–æ –∑–∞–±—ã–ª–∏ –∏–º—è —Ä–µ—Å—É—Ä—Å–∞ , –Ω–∞–ø—Ä–∏–º–µ—Ä: "nginx"
```terraform
resource "docker_image" {
  name         = "nginx:latest"
  keep_locally = true
}
```

![img5](img/img5.png)

5. ![img6](img/img6.png)
![img7](img/img7.png)
     
6. 
üõë –ü–æ—á–µ–º—É –æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å -auto-approve? 

–ö–æ–º–∞–Ω–¥–∞ terraform apply -auto-approve –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π , —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω–æ , –ø–æ—Ç–æ–º—É —á—Ç–æ: 

- –ù–µ–≤–µ—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
	
- Terraform –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –±–µ–∑ –≤–∞—à–µ–≥–æ –≤–µ–¥–æ–º–∞.
–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö
	
- –ù–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª–µ–Ω–∏–µ –ë–î –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
–†–∞–±–æ—Ç–∞ –≤ production
	
- –û—Å–æ–±–µ–Ω–Ω–æ –æ–ø–∞—Å–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ –±–æ–µ–≤–æ–π —Å—Ä–µ–¥–µ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (
plan
).

![img8](img/img8.png)

8. 
![img9](img/img9.png)

9. –í main.tf –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –±–ª–æ–∫:

```terraform
resource "docker_image" "nginx" {
  name         = "nginx:latest"
  keep_locally = true
}
```

**keep_locally = true**

–≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –≥–æ–≤–æ—Ä–∏—Ç Terraform –Ω–µ —É–¥–∞–ª—è—Ç—å –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ , –¥–∞–∂–µ –µ—Å–ª–∏ —Å–∞–º —Ä–µ—Å—É—Ä—Å docker_image –±—É–¥–µ—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω.

![img10](img/img10.png)